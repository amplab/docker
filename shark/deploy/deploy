#!/bin/bash

# determines which Shark image is chosen
SHARK_VERSION=0.7.0

# set this value to the number of workers you want
NUM_WORKERS=2

source ../../dnsmasq-precise/deploy/start_nameserver.sh
source start_shark_cluster.sh

echo "*** Starting Shark $SHARK_VERSION + Spark ***"
start_nameserver
sleep 10
start_shark_master
sleep 40
start_shark_workers
sleep 3
print_cluster_info

# parameter -c causes us to directly fall into a Shark shell
if [[ "$#" -eq 1 ]] && [[ "$1" == "-c" ]];
then
    sudo docker run -i -t shark-shell:$SHARK_VERSION $MASTER_IP
fi
